<h3 class='col s12 center-align purple-text'><i class="purple-text material-icons">people</i> Contributors</h3>

<div class="fixed-action-btn">
    <a href="#" onclick="showAddEditModal('Contributor', false, '/images/avatar.png', false, false)" class="btn-floating btn btn-large blue waves-effect">
        <i class="large material-icons">add</i>
    </a>
</div>

<div th:each="contributor : ${contributors}" class='col l4 m4 s12'>
    <div class='card'>
        <div class="card-image"> 
            <img class="materialboxed" th:src="${IMG_BASE + contributor.imageUrl}" onerror="this.src='/images/background.jpg'" height="250">
            <span style="font-weight: bolder; color: white; text-shadow: -1px 0 purple, 0 1px purple, 1px 0 purple, 0 -1px purple;" class="card-title" th:text="${contributor.firstName + ' ' + contributor.lastName}"></span>
            <a class="btn-floating halfway-fab waves-effect waves-light purple" th:onclick="showAddEditModal('Contributor', JSON.parse(/*[[${contributor.toJSON()}]]*/), [[${IMG_BASE + contributor.imageUrl}]], false, false)">
                <i class="material-icons">edit</i>
            </a>
        </div>
        <div class="card-stacked">
            <div class="card-content">
                <div class="valign-wrapper">
                    <i class="blue-text material-icons">email</i>
                    <span class="" th:text="${contributor.email}"></span>
                </div>
            </div>
            <div class="card-action row" style="font-size: 13px;">

                <div class="valign-wrapper orange-text col s6">
                    <i class="material-icons">accessibility</i>
                    <span th:text="${contributor.type}"></span>
                </div>
                <div class="valign-wrapper col s6" th:with="isActive=${contributor.status.name() == 'ACTIVE'}">
                    <a class="valign-wrapper" href="#" th:classappend="${isActive ? 'red-text':'green-text'}" th:if="${contributor.type.name() == 'SUPER' ? 'false': 'true'}"
                       th:onclick="showConfirmModal('Contributor', [[${isActive ? 'BLOCK': 'UNBLOCK'}]], '/contributor/save/contributor/update_status/[[${contributor.id}]]/[[${(isActive ? 2 : 1)}]]')">
                        <i class="material-icons" th:classappend="${isActive ? 'red-text':'green-text'}" th:text="${isActive ? 'block': 'assignment_turned_in'}">block</i>
                        <span th:text="${isActive ? 'BLOCK': 'UNBLOCK'}"></span>
                    </a>
                </div>

            </div>
        </div>
    </div>
</div>

<div id="add_edit_modal" class="modal modal-fixed-footer">
    <form id="add_edit_form" class="row" method="post" th:action="@{/contributor/save/contributor}" enctype="multipart/form-data">
        <div class="modal-content">
            <h4 id='add_edit_label' class="col s12 purple-text center-align">Modal Header</h4>
            <input type="hidden" id='id' name="id" value='-1' hidden='' required=""/>
            <div class="row">
                <div class="col s12 l6">
                    <div class="picture-container">
                        <div class="picture">
                            <img th:src="@{/images/avatar.png}" onerror="this.src='/images/avatar.png'"
                                 class="picture-src" id="fantasticPicturePreview" title="" />
                            <input name ="image" type="file" id="fantastic-picture" onchange="readImageURL(this);"/>
                        </div>
                        <h6>Choose Picture</h6>
                    </div>
                </div>
                <div class='input-field col s12 l6 purple-text'>
                    <i class="material-icons prefix">border_color</i>
                    <input placeholder="First Name" class='validate' type='text' name='firstName' id='firstName' required=""/>
                </div>

                <div class='input-field col s12 l6 purple-text'>
                    <i class="material-icons prefix">border_color</i>
                    <input placeholder="Last Name" class='validate' type='text' name='lastName' id='lastName' required=""/>
                </div>

                <div class="input-field col s12 l6 purple-text">
                    <i class="material-icons prefix">arrow_drop_down_circle</i>
                    <select id='type' name="type" required="">
                        <option value="" disabled selected="">Choose your option</option>
                        <option value="REGULAR">Regular Contributor</option>
                        <option value="CLASS_REP">Class Representative</option>
                        <option value="LECTURER">Lecturer</option>
                        <option value="ASSOCIATION">Association Official</option>
                        <option value="SUPER">Super</option>
                    </select>
                </div>

                <div class='row col s12 l6'>
                    <div class='input-field col s12 purple-text'>
                        <i class="material-icons prefix">border_color</i>
                        <input placeholder="Email" class='validate' type='email' name='email' id='email' required=""/>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a class="modal-close waves-effect waves-red btn-flat red-text"><i class='material-icons left'>close</i> Close</a>
            <button type='submit' id="add_edit_button" class='btn waves-effect purple'>
            </button>
        </div>
    </form>
</div>

<div id="confirm_modal" class="modal">
    <div class="modal-content">
        <h4 class="blue-text">Confirmation !!!</h4>
        <h6 id="confirm_modal_message">This action is cannot be undone</h6>
        <h6 class="red-text">This action is cannot be undone</h6>
    </div>
    <div class="modal-footer">
        <a class="modal-close waves-effect waves-red btn-flat red-text"><i class='material-icons left'>close</i>No</a>
        <a id="confirm_modal_link" href="#!" class="blue white-text modal-close waves-effect waves-red btn-flat"><i class='material-icons left'>check</i>Yes</a>
    </div>
</div>
<script>
    $(document).ready(function () {
        $('.materialboxed').materialbox();
        $('.fixed-action-btn').floatingActionButton();
        $('.modal').modal();
        $('select').formSelect();
    });
</script>